import React from 'react'
import {Link} from 'react-router-dom'


const demoDate = {
    exchange_news: [
        {
            tit: '11111云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain 上线11111云币网严格自律的公开信11111云币网严格自律的公开信公告',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        }
    ],
    project_news: [
        {
            tit: '222222云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain 上线11111云币网严格自律的公开信11111云币网严格自律的公开信公告',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        }
    ],
    shot_news: [
        {
            tit: '333333333云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain 上线11111云币网严格自律的公开信11111云币网严格自律的公开信公告',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三唯链 VeChain云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        },
        {
            tit: '暂时停用第三方交易接口的通知11111云币网严格自律的公开信',
            url: "/",
            icon: 'http://static.feixiaohao.com/Coin/343cde22866a94e9f0e2d0827dde9950_small.png',
            post_time: 1529027975000
        }
    ]
};

const dealTime = (timestamp) => {
    const time = new Date(parseInt(timestamp));
    const mouth = time.getMonth() + 1;
    const date = time.getDate();
    const hour = time.getHours();
    const min = time.getMinutes();
    return (mouth < 10 ? '0' + mouth : mouth) + '-' + (date < 10 ? '0' + date : date) + ' ' + (hour < 10 ? '0' + hour : hour) + ":" + (min < 10 ? '0' + min : min)
};

class scrollNews extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            show: 1,
            top: 0,
            /**
             * exchange_news:this.props.exchange_news,
             project_news:this.props.project_news,
             shot_news:this.props.shot_news
             */
            exchange_news: demoDate.exchange_news,
            project_news: demoDate.project_news,
            shot_news: demoDate.shot_news
        };
        this.onClick = this.onClick.bind(this)
    }

    componentDidMount() {
        setInterval(() => {
            const next = this.state.top - 1;
            if (next < -33) {
                let next_exchange = [...this.state.exchange_news];
                const next_exchange_one = next_exchange.shift();
                next_exchange = [...next_exchange, next_exchange_one];
                let next_project = [...this.state.project_news];
                const next_project_one = next_project.shift();
                next_project = [...next_project, next_project_one];
                let next_shot = [...this.state.shot_news];
                const next_shot_one = next_shot.shift();
                next_shot = [...next_shot, next_shot_one];
                this.setState({
                    top: 0,
                    exchange_news: next_exchange,
                    project_news: next_project,
                    shot_news: next_shot,
                })
            } else {
                this.setState({top: this.state.top - 1})
            }
        }, 100)
    }

    onClick(a) {
        this.setState({show: a,})
    }

    render() {
        return (
            <div className="new-side-box new-tab-box">
                <div className="new-box-tit"><h2>交易所最新公告</h2><Link to="/" className="new-more" title="更多"/></div>
                <div className="new-tab-tit">
                    <div className={this.state.show === 1 ? "new-tab-subtit active" : "new-tab-subtit"} onClick={() => {
                        this.onClick(1)
                    }}>交易所公告
                    </div>
                    <div className={this.state.show === 2 ? "new-tab-subtit active" : "new-tab-subtit"} onClick={() => {
                        this.onClick(2)
                    }}>项目方公告
                    </div>
                    <div className={this.state.show === 3 ? "new-tab-subtit active" : "new-tab-subtit"} onClick={() => {
                        this.onClick(3)
                    }}>快讯
                    </div>
                </div>
                <ul className="new-artList new-artList-scroll new-artList-index  new-tab-cell"
                    style={{display: this.state.show === 1 ? "block" : "none"}}>
                    {this.state.exchange_news.map((cell, index) =>
                        <li style={{marginTop: index === 0 ? this.state.top : 'auto'}}><Link to={cell.url}><span
                            className="tit"><img
                            src={cell.icon} alt={cell.tit}/>{cell.tit}</span><span
                            className="time">{dealTime(cell.post_time)}</span></Link></li>)}
                </ul>
                <ul className="new-artList new-artList-scroll new-artList-index  new-tab-cell"
                    style={{display: this.state.show === 2 ? "block" : "none"}}>
                    {this.state.project_news.map((cell, index) =>
                        <li style={{marginTop: index === 0 ? this.state.top : 'auto'}}><Link to={cell.url}><span
                            className="tit"><img
                            src={cell.icon} alt={cell.tit}/>{cell.tit}</span><span
                            className="time">{dealTime(cell.post_time)}</span></Link></li>)}
                </ul>
                <ul className="new-artList new-artList-scroll new-artList-index  new-tab-cell"
                    style={{display: this.state.show === 3 ? "block" : "none"}}>
                    {this.state.shot_news.map((cell, index) =>
                        <li style={{marginTop: index === 0 ? this.state.top : 'auto'}}><Link to={cell.url}><span
                            className="tit"><img
                            src={cell.icon} alt={cell.tit}/>{cell.tit}</span><span
                            className="time">{dealTime(cell.post_time)}</span></Link></li>)}
                </ul>
            </div>
        )
    }
}


export default scrollNews